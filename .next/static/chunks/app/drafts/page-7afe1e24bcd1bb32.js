(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4427],{7965:(e,t,s)=>{Promise.resolve().then(s.bind(s,9133)),Promise.resolve().then(s.bind(s,9368))},9133:(e,t,s)=>{"use strict";s.d(t,{DraftsList:()=>i});var a=s(5155),r=s(2115),l=s(9715),n=s(6485),c=s(7828);function i(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[d,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await fetch("/api/drafts/list");if(e.ok){let s=await e.json();t(s.drafts||[])}}catch(e){console.error("Failed to fetch drafts:",e)}finally{i(!1)}},x=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB"][t]},h=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});if(s)return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-16 bg-gray-200 rounded"},e))})]})});let g=e.filter(e=>"content"===e.type),u=e.filter(e=>"schema"===e.type);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,a.jsx)(l.A,{className:"w-5 h-5 mr-2 text-blue-600"}),"Content Drafts"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Generated markdown content"})]}),(0,a.jsx)("div",{className:"p-4",children:0===g.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(l.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{children:"No content drafts found"}),(0,a.jsx)("p",{className:"text-sm",children:"Run the GEO bot to generate content"})]}):(0,a.jsx)("div",{className:"space-y-2",children:g.map(e=>(0,a.jsx)("button",{onClick:()=>{o(e.path),window.dispatchEvent(new CustomEvent("draftSelect",{detail:e.path}))},className:"w-full text-left p-3 rounded-lg border transition-colors ".concat(d===e.path?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.name.replace(".md","")}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[(0,a.jsx)(n.A,{className:"w-3 h-3 mr-1"}),h(e.lastModified),(0,a.jsx)("span",{className:"mx-2",children:"•"}),x(e.size)]})]}),(0,a.jsx)(c.A,{className:"w-4 h-4 text-gray-400"})]})},e.path))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,a.jsx)(l.A,{className:"w-5 h-5 mr-2 text-green-600"}),"Schema Drafts"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"JSON-LD structured data"})]}),(0,a.jsx)("div",{className:"p-4",children:0===u.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(l.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{children:"No schema drafts found"}),(0,a.jsx)("p",{className:"text-sm",children:"Run the GEO bot to generate schemas"})]}):(0,a.jsx)("div",{className:"space-y-2",children:u.map(e=>(0,a.jsx)("button",{onClick:()=>{o(e.path),window.dispatchEvent(new CustomEvent("draftSelect",{detail:e.path}))},className:"w-full text-left p-3 rounded-lg border transition-colors ".concat(d===e.path?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.name.replace(".jsonld","")}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[(0,a.jsx)(n.A,{className:"w-3 h-3 mr-1"}),h(e.lastModified),(0,a.jsx)("span",{className:"mx-2",children:"•"}),x(e.size)]})]}),(0,a.jsx)(c.A,{className:"w-4 h-4 text-gray-400"})]})},e.path))})})]}),(0,a.jsx)("button",{onClick:m,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Drafts"})]})}},9368:(e,t,s)=>{"use strict";s.d(t,{DraftViewer:()=>m});var a=s(5155),r=s(2115),l=s(9715),n=s(9602),c=s(5917),i=s(5426),d=s(9867),o=s(856);function m(){let[e,t]=(0,r.useState)(null),[s,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(!1),[g,u]=(0,r.useState)("preview");(0,r.useEffect)(()=>{let e=e=>{let t=e.detail;t&&j(t)};return window.addEventListener("draftSelect",e),()=>{window.removeEventListener("draftSelect",e)}},[]);let j=async e=>{m(!0);try{let s=await fetch("/api/drafts/content?path=".concat(encodeURIComponent(e)));if(s.ok){let e=await s.json();t(e),u("json"===e.type?"source":"preview")}}catch(e){console.error("Failed to fetch draft content:",e)}finally{m(!1)}},p=async()=>{e&&(await navigator.clipboard.writeText(e.content),h(!0),setTimeout(()=>h(!1),2e3))};return e?s?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"},e))})]})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:["json"===e.type?(0,a.jsx)(n.A,{className:"w-5 h-5 mr-2 text-green-600"}):(0,a.jsx)(l.A,{className:"w-5 h-5 mr-2 text-blue-600"}),e.filename]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Last modified: ",new Date(e.lastModified).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["markdown"===e.type&&(0,a.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>u("preview"),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat("preview"===g?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Preview"}),(0,a.jsx)("button",{onClick:()=>u("source"),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat("source"===g?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Source"})]}),(0,a.jsx)("button",{onClick:p,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Copy to clipboard",children:x?(0,a.jsx)(c.A,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(i.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{if(e){let t=new Blob([e.content],{type:"json"===e.type?"application/json":"text/markdown"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=e.filename,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}},className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Download file",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})})]})]})}),(0,a.jsx)("div",{className:"p-6",children:"json"===e.type?(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:(0,a.jsx)("pre",{className:"text-green-400 text-sm",children:(0,a.jsx)("code",{children:JSON.stringify(JSON.parse(e.content),null,2)})})}):(0,a.jsx)("div",{className:"prose prose-lg max-w-none",children:"preview"===g?(0,a.jsx)(o.oz,{components:{h1:e=>{let{children:t}=e;return(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:t})},h2:e=>{let{children:t}=e;return(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-3 mt-6",children:t})},h3:e=>{let{children:t}=e;return(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2 mt-4",children:t})},p:e=>{let{children:t}=e;return(0,a.jsx)("p",{className:"text-gray-700 mb-4 leading-relaxed",children:t})},ul:e=>{let{children:t}=e;return(0,a.jsx)("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:t})},ol:e=>{let{children:t}=e;return(0,a.jsx)("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:t})},li:e=>{let{children:t}=e;return(0,a.jsx)("li",{className:"mb-1",children:t})},strong:e=>{let{children:t}=e;return(0,a.jsx)("strong",{className:"font-semibold text-gray-900",children:t})},em:e=>{let{children:t}=e;return(0,a.jsx)("em",{className:"italic text-gray-800",children:t})},blockquote:e=>{let{children:t}=e;return(0,a.jsx)("blockquote",{className:"border-l-4 border-blue-500 pl-4 italic text-gray-600 my-4",children:t})},code:e=>{let{children:t}=e;return(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono text-gray-800",children:t})}},children:e.content}):(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:(0,a.jsx)("pre",{className:"text-gray-300 text-sm",children:(0,a.jsx)("code",{children:e.content})})})})})]}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)(l.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Select a Draft"}),(0,a.jsx)("p",{children:"Choose a content or schema draft from the list to preview it here."})]})})}}},e=>{e.O(0,[4979,8441,1255,7358],()=>e(e.s=7965)),_N_E=e.O()}]);