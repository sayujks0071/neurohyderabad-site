# Drafts Preview System

## Overview

The drafts system allows you to preview content generated by the GEO bot before publishing it to your website. This internal preview system helps you review and approve content before making it live.

## Features

### ðŸ“‹ Draft Management
- **Content Drafts**: Preview markdown content from `geo-bot/output/`
- **Schema Drafts**: View JSON-LD structured data from `schemas/`
- **File Information**: Shows file size, last modified date, and type
- **Auto-refresh**: Refresh button to reload draft list

### ðŸ‘€ Content Viewer
- **Markdown Rendering**: Beautiful preview of generated content
- **Source View**: Toggle to see raw markdown source
- **JSON-LD Viewer**: Syntax-highlighted JSON schema display
- **Copy to Clipboard**: Easy copying of content
- **Download Files**: Download drafts for external editing

### ðŸŽ¨ User Interface
- **Responsive Design**: Works on desktop and mobile
- **Clean Layout**: Two-panel design with list and viewer
- **Visual Indicators**: Different colors for content vs schema files
- **Loading States**: Smooth loading animations

## File Structure

```
app/drafts/
â”œâ”€â”€ page.tsx                    # Main drafts page
â””â”€â”€ components/
    â”œâ”€â”€ DraftsList.tsx         # Left panel - file list
    â””â”€â”€ DraftViewer.tsx        # Right panel - content viewer

app/api/drafts/
â”œâ”€â”€ list/route.ts              # API to list all drafts
â””â”€â”€ content/route.ts           # API to fetch draft content

geo-bot/output/                # Generated markdown content
â”œâ”€â”€ best-neurosurgeon-in-hyderabad.md
â”œâ”€â”€ endoscopic-spine-surgery-hyderabad.md
â””â”€â”€ ...

schemas/                       # Generated JSON-LD schemas
â”œâ”€â”€ best-neurosurgeon-in-hyderabad.jsonld
â”œâ”€â”€ endoscopic-spine-surgery-hyderabad.jsonld
â””â”€â”€ ...
```

## Usage

### Accessing Drafts
1. Navigate to `/drafts` in your Next.js site
2. Or click "Drafts" in the header navigation
3. The page is protected with `noindex, nofollow` to prevent search engine indexing

### Viewing Content
1. **Select a Draft**: Click on any file in the left panel
2. **Preview Content**: View rendered markdown or formatted JSON
3. **Toggle Views**: Switch between preview and source for markdown
4. **Copy/Download**: Use the action buttons in the header

### Content Types

#### Markdown Content
- **SEO Titles**: Optimized page titles (â‰¤60 characters)
- **Meta Descriptions**: Search result descriptions (â‰¤155 characters)
- **Structured Content**: H1, H2, H3 sections with bullet points
- **FAQs**: 10 frequently asked questions with answers
- **TL;DR**: 3-bullet summary
- **Internal Links**: Suggested anchor text and target URLs

#### JSON-LD Schemas
- **Physician Schema**: Doctor information and credentials
- **MedicalClinic Schema**: Hospital and location details
- **FAQPage Schema**: Structured FAQ data
- **BreadcrumbList Schema**: Navigation structure
- **VideoObject Schema**: Video content (when applicable)

## Security

### File Access Control
- Only files in `geo-bot/output/` and `schemas/` directories are accessible
- Path traversal protection prevents accessing files outside allowed directories
- File extensions are validated (`.md` and `.jsonld` only)

### SEO Protection
- Drafts page has `robots: 'noindex, nofollow'` meta tag
- Content is not indexed by search engines
- Internal preview only - not meant for public consumption

## Integration with GEO Bot

### Automatic Updates
- When the GEO bot runs, new files are automatically available in the drafts system
- No manual refresh needed - files are read from disk at request time
- File timestamps show when content was last generated

### Workflow Integration
1. **GEO Bot Runs**: Generates content and schemas
2. **Review in Drafts**: Preview content before publishing
3. **Approve Content**: Copy or download approved content
4. **Publish**: Integrate approved content into your website
5. **Create PR**: Use GitHub Actions to create pull requests for review

## Customization

### Styling
- Uses Tailwind CSS for consistent styling
- Markdown rendering uses custom components for better typography
- JSON-LD uses syntax highlighting for better readability

### Adding New File Types
To support additional file types:
1. Update the API routes to handle new extensions
2. Add new content type detection logic
3. Create appropriate viewers in the DraftViewer component

### Extending Functionality
- Add approval/rejection workflow
- Implement content editing capabilities
- Add version history tracking
- Create content comparison tools

## Troubleshooting

### Common Issues

1. **No drafts showing**
   - Check if `geo-bot/output/` and `schemas/` directories exist
   - Verify files have correct extensions (`.md`, `.jsonld`)
   - Check file permissions

2. **Content not loading**
   - Verify file paths are correct
   - Check for file corruption
   - Ensure files are not empty

3. **Styling issues**
   - Clear browser cache
   - Check for CSS conflicts
   - Verify Tailwind CSS is properly configured

### Debug Mode
Enable debug logging by checking browser console for error messages and API responses.

## Future Enhancements

- **Content Editing**: In-browser markdown editor
- **Approval Workflow**: Approve/reject system with comments
- **Version Control**: Track content changes over time
- **Bulk Operations**: Select and manage multiple drafts
- **Export Options**: Export to various formats (PDF, Word, etc.)
- **Collaboration**: Multi-user review and approval system
